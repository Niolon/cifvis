import{C as g,f as c,S as i}from"./index.VZ7TkVcH.js";function d(n,t="info"){const e=document.getElementById("status-message");e.textContent=n,e.className=`show ${t}`,t==="success"&&setTimeout(()=>{e.className=e.className.replace("show","")},2e3)}const o=new g(document.body);o.animate();o.selections.onChange(n=>{const t=document.getElementById("selection-container");for(;t.firstChild;)t.firstChild.remove();n.forEach(e=>{const s=document.createElement("div");if(s.className="selection-box",s.style.border=`3px solid #${e.color.toString(16)}`,e.type==="atom")s.innerHTML=`
                <div class="selection-title">Atom: ${e.data.label}</div>
                <div class="selection-info">
                    <span>Type:</span><span>${e.data.atomType}</span>
                    <span>X:</span><span>${e.data.position.x.toFixed(4)}</span>
                    <span>Y:</span><span>${e.data.position.y.toFixed(4)}</span>
                    <span>Z:</span><span>${e.data.position.z.toFixed(4)}</span>
                </div>
            `;else if(e.type==="bond"){const r=c(e.data.bondLength,e.data.bondLengthSU);s.innerHTML=`
                <div class="selection-title">Bond: ${e.data.atom1Label} - ${e.data.atom2Label}</div>
                <div class="selection-info">
                    <span>Length:</span><span>${r} Å</span>
                </div>
            `}else if(e.type==="hbond"){const r=e.data.hydrogenAtomLabel,a=e.data.hydrogenAtomLabel,u=e.data.acceptorAtomLabel,y=c(e.data.donorHydrogenDistance,e.data.donorHydrogenDistanceSU),p=c(e.data.acceptorHydrogenDistance,e.data.acceptorHydrogenDistanceSU),f=c(e.data.donorAcceptorDistance,e.data.donorAcceptorDistanceSU),m=c(e.data.hBondAngle,e.data.hBondAngleSU);s.innerHTML=`
                <div class="selection-title">H-Bond: ${r} - ${a} ··· ${u}</div>
                <div class="selection-info">
                    <span>D-H:</span><span>${y} Å</span>
                    <span>H···A:</span><span>${p} Å</span>
                    <span>D···A:</span><span>${f} Å</span>
                    <span>D-H···A:</span><span>${m}°</span>
                </div>
            `}t.appendChild(s)})});function h(){const n=document.getElementById("upload-button"),t=document.getElementById("cif-upload");n.innerHTML=i.upload,n.addEventListener("click",()=>{t.click()}),t.addEventListener("change",async e=>{const s=e.target.files[0];if(s)try{d("Reading file...","info");const r=await s.text(),a=await o.loadStructure(r);a.success?(d("Structure loaded successfully","success"),l()):d("Error loading structure: "+a.error,"error")}catch(r){console.error("Error reading file:",r),d("Error reading file: "+r.message,"error")}}),document.addEventListener("dragover",e=>{e.preventDefault(),e.stopPropagation()}),document.addEventListener("drop",async e=>{e.preventDefault(),e.stopPropagation();const s=e.dataTransfer.files[0];if(!s||!s.name.toLowerCase().endsWith(".cif")){d("Please drop a CIF file","error");return}try{d("Reading file...","info");const r=await s.text(),a=await o.loadStructure(r);a.success?(d("Structure loaded successfully","success"),l()):d("Error loading structure: "+a.error,"error")}catch(r){console.error("Error reading file:",r),d("Error reading file: "+r.message,"error")}})}function L(){const n=document.getElementById("hydrogen-button");n.innerHTML=i.hydrogen.none,n.addEventListener("click",async()=>{(await o.cycleModifierMode("hydrogen")).success&&(n.innerHTML=i.hydrogen[o.modifiers.hydrogen.mode])})}function E(){const n=document.getElementById("disorder-button");n.addEventListener("click",async()=>{(await o.cycleModifierMode("disorder")).success&&(n.innerHTML=i.disorder[o.modifiers.disorder.mode])})}function b(){const n=document.getElementById("symmetry-button");n.addEventListener("click",async()=>{(await o.cycleModifierMode("symmetry")).success&&(n.innerHTML=i.symmetry[o.modifiers.symmetry.mode])})}function v(){h(),L(),E(),b()}function l(){const n=document.getElementById("hydrogen-button"),t=o.numberModifierModes("hydrogen")>1;n.style.display=t?"flex":"none",t&&(n.innerHTML=i.hydrogen[o.modifiers.hydrogen.mode]);const e=document.getElementById("disorder-button"),s=o.numberModifierModes("disorder")>1;e.style.display=s?"flex":"none",s&&(e.innerHTML=i.disorder[o.modifiers.disorder.mode]);const r=document.getElementById("symmetry-button"),a=o.numberModifierModes("symmetry")>1;r.style.display=a?"flex":"none",a&&(r.innerHTML=i.symmetry[o.modifiers.symmetry.mode])}v();const B="/cifvis/";fetch(`${B}cif/disorder.cif`).then(n=>n.text()).then(n=>{const t=o.loadStructure(n);return l(),t}).catch(n=>{console.error("Error loading initial structure:",n),d("Error loading initial structure. Try uploading your own CIF file.","error")});
